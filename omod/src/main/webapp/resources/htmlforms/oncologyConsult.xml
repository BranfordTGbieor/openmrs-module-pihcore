<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http//license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
  -->

<htmlform id="post-op-surgical-note" class="simple-form-ui" formUuid="d29a49b1-957b-4bcb-b192-07484de4165b"
          formName="Oncology Consult Sheet"
          formEncounterType="035fb8da-226a-420b-8d8b-3904f3bedb25" formVersion="0.1">

    <translations defaultLocale="fr">
        <code name="oncology_consult">
            <variant locale="en" value="Oncology Consult"/>
            <variant locale="fr" value="Consultation d'oncologie"/>
        </code>
        <code name="service_team">
            <variant locale="en" value="Service / Team"/>
            <variant locale="fr" value="Service / Equipe"/>
        </code>
        <code name="other">
            <variant locale="en" value="***** Needs Translation *****"/>
            <!-- Use message.properties for this -->
            <variant locale="fr" value="autre"/>
        </code>
        <code name="lab">
            <variant locale="en" value="Lab (ie. culture)"/>
            <variant locale="fr" value="Labo (e.g. culture)"/>
        </code>
        <code name="yes">
            <variant locale="en" value="yes"/>
            <variant locale="fr" value="oui"/>
        </code>
        <code name="no">
            <variant locale="en" value="no"/>
            <variant locale="fr" value="non"/>
        </code>
        <code name="location">
            <variant locale="en" value="Location (required)"/>
            <variant locale="fr" value="Lieu  (demandé)"/>
        </code>
        <code name="provider">
            <variant locale="en" value="Provider (required)"/>
            <variant locale="fr" value="Prestataire médical.  (demandé)"/>
        </code>
        <code name="date">
            <variant locale="en" value="Date of surgery"/>
            <variant locale="fr" value="Date d'opération"/>
        </code>
        <code name="created_on">
            <variant locale="en" value="Created On"/>
            <variant locale="fr" value="Created On"/>
        </code>
        <code name="last_updated_on">
            <variant locale="en" value="Last Updated On"/>
            <variant locale="fr" value="Last Updated On"/>
        </code>
        <code name="printed_on">
            <variant locale="en" value="Printed On"/>
            <variant locale="fr" value="Printed On"/>
        </code>
        <code name="pe_exam_findings">
            <variant locale="en" value="Notable Exam Findings"/>
            <variant locale="fr" value="Constatations de l'examen notables"/>
        </code>
        <code name="cancer_staging">
            <variant locale="en" value="Cancer Staging"/>
            <variant locale="fr" value="Stadification du cancer"/>
        </code>
        <code name="hpi">
            <variant locale="en" value="History of Presenting Illness"/>
            <variant locale="fr" value="Complaintes actuelles"/>
        </code>
        <code name="ecog_perf_status">
            <variant locale="en" value="ECOG"/>
            <variant locale="fr" value="ECOG"/>
        </code>
        <code name="blood_tests">
            <variant locale="en" value="Blood Tests"/>
            <variant locale="fr" value="Des Analyses de Sang"/>
        </code>
        <code name="prev_treatment">
            <variant locale="en" value="Patient has previously received treatment"/>
            <variant locale="fr" value="**** Needs Translation ****"/>
        </code>
        <code name="prev_treatment_comment">
            <variant locale="en" value="If yes, describe previous treatment, including where it was received:"/>
            <variant locale="fr" value="Si oui, **** Needs Translation ****"/>
        </code>
        <code name="current_treatment">
            <variant locale="en" value="Patient is currently receiving treatment"/>
            <variant locale="fr" value="**** Needs Translation ****"/>
        </code>
        <code name="current_treatment_comment">
            <variant locale="en" value="If yes, describe current treatment, including where it is being administered:"/>
            <variant locale="fr" value="Si oui, **** Needs Translation ****"/>
        </code>

    </translations>

    <style type="text/css">


        .column {
        float: left;
        width: 50%
        }

        .simple-form-ui input {
        min-width: 80%
        }

        form fieldset {
        min-width: 90%
        }

        #encounterDate input {
        min-width: 15%
        }

        textarea {
        overflow-y: hidden; /* fixes scrollbar flash - kudos to @brettjonesdev */
        padding-top: 1.1em; /* fixes text jump on Enter keypress */
        }

        @media print {
        .print-form-datestamps { display: block !important }
        button.cancel, button.submit { display: none }
        label { font-weight: bold }
        label[for] { font-weight: normal } /* refers to the radio set label */
        }
    </style>

    <script type="text/javascript">

        jq(function() {

        // make text areas expand based on content (this allows us to avoid scrollbars and thereby facilitate printing)
        jq('#post-op-surgical-note').on( 'keyup', 'textarea', function (){
        jq(this).height( 0 );
        jq(this).height( this.scrollHeight );
        });

        jq('#post-op-surgical-note').find( 'textarea' ).keyup();

        });

    </script>


    <ifMode mode="VIEW" include="false">
        <h2>
            <label>
                <uimessage code="oncology_consult"/>
            </label>
        </h2>
    </ifMode>

    <div class="print-form-datestamps" style="display:none">
        <p><uimessage code="created_on"/>:
            <lookup complexExpression="$form.dateCreated"/>
        </p>
        <p><uimessage code="last_updated_on"/>:
            <lookup complexExpression="$form.dateChanged"/>
        </p>
        <p><uimessage code="printed_on"/>:
            <lookup complexExpression="$formGeneratedDatetime"/>
        </p>
    </div>


    <section id="service-team" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="service_team">

        <p>
            <label>
                <uimessage code="date"/>
            </label>
            <encounterDate id="encounterDate" default="now"/>
        </p>
        <p>
            <label>
                <uimessage code="provider"/>
            </label>
            <encounterProvider role="Provider" required="true"/>
        </p>

    </section>

    <section id="site-of-care" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="site_of_care">
        <p>
            <label>
                <uimessage code="location"/>
            </label>
            <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
        </p>
    </section>

    <section id="diagnosis" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="diagnosis">
        <p>
            <label>
                <uimessage code="cancer_staging"/>
            </label>
            <obs conceptId="CIEL:160786"
                 answerConceptIds="CIEL:160769,CIEL:160771,CIEL:160770,CIEL:160772,CIEL:160773,CIEL:160774,CIEL:160775,CIEL:160776,CIEL:160777,CIEL:160778,CIEL:160779,CIEL:160780,CIEL:160781,CIEL:160782,CIEL:160783,CIEL:160784,CIEL:160785"/>
        </p>
    </section>

    <section id="hpi" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="hpi">
        <p>
            <label>
                <uimessage code="hpi"/>
            </label>
            <obs conceptId="PIH:PRESENTING HISTORY" style="textarea" rows="3" cols="80"/>
        </p>
    </section>

    <section id="physical-exam" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="physical_exam">
        <p>
            <label>
                <uimessage code="ecog_perf_status"/>
            </label>
            <obs conceptId="CIEL:160379"/>
            <br/>
            <label>
                <uimessage code="pe_exam_findings"/>
            </label>
            <obs conceptId="PIH:PHYSICAL SYSTEM COMMENT" labelText="Notable Exam Findings:" style="textarea" rows="3"
                 cols="80"/>
        </p>
    </section>

    <section id="treatment" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="treatment">
        <p class="radio">
            <label>
                <uimessage code="prev_treatment"/>
            </label>
            <obs id="prev_treatment" conceptId="CIEL:162964" style="radio"
                 answerConceptIds="PIH:YES,PIH:NO" answerCodes="yes,no"
                 answerSeparator=""/>
        </p>
        <p>
            <label>
                <uimessage code="prev_treatment_comment"/>
            </label>
            <obs conceptId="CIEL:162965" style="textarea" rows="3" cols="80"/>
        </p>
        <p class="radio">
            <label>
                <uimessage code="current_treatment"/>
            </label>
            <obs id="current_treatment" conceptId="CIEL:162966" style="radio"
                 answerConceptIds="PIH:YES,PIH:NO" answerCodes="yes,no"
                 answerSeparator=""/>
        </p>
        <p>
            <label>
                <uimessage code="current_treatment_comment"/>
            </label>
            <obs conceptId="CIEL:162967" style="textarea" rows="3" cols="80"/>
        </p>
    </section>
    <section id="goals-of-care" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="goals_of_care">
        <p class="radio">
            <obs conceptId="CIEL:160846" style="radio"
                 answerConceptIds="CIEL:160847,CIEL:160849" answerCodes="curative,palliative"
                 answerSeparator=""/>
        </p>
    </section>
    <section id="blood-tests" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="blood-tests">
        <p>
            <label>
                <uimessage code="blood_tests"/>
            </label>
            <table class="muted-header">
                <tr>
                    <td>
                        Header row
                    </td>
                    <td>
                        Header row2
                    </td>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="PIH:RWANDA HEMATOLOGY SET">
                        <td>
                            <obs conceptId="PIH:DATE OF LABORATORY TEST" labelText="Hematology"/>
                        </td>
                        <td>
                            <obs conceptId="PIH:HEMOGLOBIN" labelText="Hb:" showUnits="true"/>
                            <obs conceptId="PIH:HEMATOCRIT" labelText="Hct:" showUnits="true"/>
                            <obs conceptId="PIH:WHITE BLOOD CELLS" labelText="WBC:" showUnits="true"/>
                            <obs conceptId="PIH:Absolute Neutrophil Count" labelText="ANC:" showUnits="true"/>
                            <obs conceptId="PIH:NEUTROPHILS" labelText="ANC%" showUnits="true"/>
                            <obs conceptId="PIH:ABSOLUTE LYMPHOCYTE COUNT" labelText="Lympho:" showUnits="true"/>
                            <obs conceptId="PIH:LYMPHOCYTES" labelText="Lymph%:" showUnits="true"/>
                            <obs conceptId="PIH:PLATELETS" labelText="Platelets:" showUnits="true"/>
                            <obs conceptId="PIH:ERYTHROCYTE SEDIMENTATION RATE" labelText="ESR:" showUnits="true"/>
                            (**NOT in Rwanda Hematology Set**)
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="PIH:BIOCHEMISTRY RESULTS">
                        <td>
                            <obs conceptId="PIH:DATE OF LABORATORY TEST" labelText="Biochemistry"/>
                        </td>
                        <td>
                            <obs conceptId="PIH:SERUM CREATININE" labelText="Cr:" showUnits="true"/>
                            <obs conceptId="PIH:TOTAL BILIRUBIN" labelText="Tbili:" showUnits="true"/>
                            <obs conceptId="PIH:SERUM GLUTAMIC-OXALOACETIC TRANSAMINASE" labelText="SGOT:"
                                 showUnits="true"/>
                            <obs conceptId="PIH:SERUM GLUTAMIC-PYRUVIC TRANSAMINASE" labelText="SGPT:"
                                 showUnits="true"/>
                            <obs conceptId="PIH:ALKALINE PHOSPHATASE" labelText="Alk Phos:" showUnits="true"/>
                            (**Not currently in Biochemistry Results set**)
                        </td>
                    </obsgroup>
                </tr>
                <tr>
                    <obsgroup groupingConceptId="PIH:ISTAT CHEM8 PLUS CONSTRUCT">
                        <td>
                            <obs conceptId="PIH:DATE OF LABORATORY TEST" labelText="iSTAT"/>
                        </td>
                        <td>
                            <obs conceptId="PIH:SERUM SODIUM" labelText="Na:"/>
                            <obs conceptId="PIH:SERUM POTASSIUM" labelText="K:"/>
                            <obs conceptId="PIH:SERUM CHLORIDE" labelText="Cl:"/>
                            <obs conceptId="PIH:SERUM CARBON DIOXIDE" labelText="CO2:"/>
                            <obs conceptId="PIH:BLOOD UREA NITROGEN" labelText="BUN:"/>
                            <obs conceptId="PIH:SERUM CREATININE" labelText="Creatinine:"/>
                            <obs conceptId="PIH:SERUM GLUCOSE" labelText="Glucose:"/>
                            <obs conceptId="PIH:LACTATE DEHYDROGENASE" labelText="LDH:"/>
                            (**Not currently part of any set**)
                            <obs conceptId="PIH:SERUM CALCIUM" labelText="Ca:"/>
                        </td>
                    </obsgroup>
                </tr>
            </table>
        </p>
    </section>

    <section id="imaging" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="imaging">
        <p>
            <label>
                <uimessage code="other"/>
            </label>
        </p>
    </section>

    <section id="special-tests" sectionTag="fieldset" headerTag="legend" headerStyle="title" headerCode="special_tests">
        <p>
            <label>
                <uimessage code="other"/>
            </label>
        </p>
    </section>


    <ifMode mode="VIEW" include="false">
        <div id="buttons">
            <submit submitClass="confirm right" submitCode="mirebalais.save"/>
            <button type="button" class="cancel">
                <uimessage code="emr.cancel"/>
            </button>
        </div>
    </ifMode>

    <!-- super hack to give our expandable text area space to expand into without causing scrolling/jumping issues -->
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>

</htmlform>
